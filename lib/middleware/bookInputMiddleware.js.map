{"version":3,"file":"bookInputMiddleware.js","names":["yup","require","bookInputMiddleware","ctx","next","postData","request","body","schema","object","shape","id","number","positive","integer","required","name","string","author","validate","e","status","success","errors","errorName"],"sources":["../../src/middleware/bookInputMiddleware.js"],"sourcesContent":["const yup = require('yup');\r\n\r\nexport default async function bookInputMiddleware(ctx, next) {\r\n    try {\r\n        const postData = ctx.request.body;\r\n        let schema = yup.object().shape({\r\n            id: yup.number().positive().integer().required(),\r\n            name: yup.string().required(),\r\n            author: yup.string().required()\r\n        });\r\n\r\n        await schema.validate(postData);\r\n        next();\r\n    } catch (e) {\r\n        ctx.status = 400;\r\n        ctx.body = {\r\n            success: false,\r\n            errors: e.errors,\r\n            errorName: e.name\r\n        }\r\n    }\r\n}\r\n\r\n"],"mappings":";;;;;;;AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAnB;;AAEe,eAAeC,mBAAf,CAAmCC,GAAnC,EAAwCC,IAAxC,EAA8C;EACzD,IAAI;IACA,MAAMC,QAAQ,GAAGF,GAAG,CAACG,OAAJ,CAAYC,IAA7B;IACA,IAAIC,MAAM,GAAGR,GAAG,CAACS,MAAJ,GAAaC,KAAb,CAAmB;MAC5BC,EAAE,EAAEX,GAAG,CAACY,MAAJ,GAAaC,QAAb,GAAwBC,OAAxB,GAAkCC,QAAlC,EADwB;MAE5BC,IAAI,EAAEhB,GAAG,CAACiB,MAAJ,GAAaF,QAAb,EAFsB;MAG5BG,MAAM,EAAElB,GAAG,CAACiB,MAAJ,GAAaF,QAAb;IAHoB,CAAnB,CAAb;IAMA,MAAMP,MAAM,CAACW,QAAP,CAAgBd,QAAhB,CAAN;IACAD,IAAI;EACP,CAVD,CAUE,OAAOgB,CAAP,EAAU;IACRjB,GAAG,CAACkB,MAAJ,GAAa,GAAb;IACAlB,GAAG,CAACI,IAAJ,GAAW;MACPe,OAAO,EAAE,KADF;MAEPC,MAAM,EAAEH,CAAC,CAACG,MAFH;MAGPC,SAAS,EAAEJ,CAAC,CAACJ;IAHN,CAAX;EAKH;AACJ"}