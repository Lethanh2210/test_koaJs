{"version":3,"file":"bookHandler.js","names":["getBooks","ctx","books","getAllBooks","body","data","e","status","success","error","message","getBook","id","params","getCurrentBook","getOneBook","save","postData","request","addBook"],"sources":["../../../src/handlers/books/bookHandler.js"],"sourcesContent":["import {\r\n    getAll as getAllBooks,\r\n    getOne as getOneBook,\r\n    save as addBook\r\n} from \"../../database/bookRepository.js\";\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<void>}\r\n */\r\nexport async function getBooks(ctx) {\r\n    try {\r\n        const books = getAllBooks();\r\n        ctx.body = {\r\n            data: books\r\n        };\r\n    } catch (e) {\r\n        ctx.status = 404;\r\n        ctx.body = {\r\n            success: false,\r\n            data: [],\r\n            error: e.message\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{data: {author: string, name: string, id: number}}|{success: boolean, error: *}|{message: string, status: string}>}\r\n */\r\nexport async function getBook(ctx) {\r\n    try {\r\n        const {id} = ctx.params;\r\n        const getCurrentBook = getOneBook(id);\r\n        if (getCurrentBook) {\r\n            return ctx.body = {\r\n                data: getCurrentBook\r\n            }\r\n        }\r\n\r\n        ctx.status = 404;\r\n        return ctx.body = {\r\n            status: 'error!',\r\n            message: 'Book Not Found with that id!'\r\n        };\r\n    } catch (e) {\r\n        return ctx.body = {\r\n            success: false,\r\n            error: e.message\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{success: boolean, error: *}|{success: boolean}>}\r\n */\r\nexport async function save(ctx) {\r\n    try {\r\n        const postData = ctx.request.body;\r\n        addBook(postData);\r\n\r\n        ctx.status = 201;\r\n        return ctx.body = {\r\n            success: true\r\n        }\r\n    } catch (e) {\r\n        return ctx.body = {\r\n            success: false,\r\n            error: e.message\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n"],"mappings":";;;;;;;;;AAAA;;AAMA;AACA;AACA;AACA;AACA;AACO,eAAeA,QAAf,CAAwBC,GAAxB,EAA6B;EAChC,IAAI;IACA,MAAMC,KAAK,GAAG,IAAAC,sBAAA,GAAd;IACAF,GAAG,CAACG,IAAJ,GAAW;MACPC,IAAI,EAAEH;IADC,CAAX;EAGH,CALD,CAKE,OAAOI,CAAP,EAAU;IACRL,GAAG,CAACM,MAAJ,GAAa,GAAb;IACAN,GAAG,CAACG,IAAJ,GAAW;MACPI,OAAO,EAAE,KADF;MAEPH,IAAI,EAAE,EAFC;MAGPI,KAAK,EAAEH,CAAC,CAACI;IAHF,CAAX;EAKH;AACJ;AAED;AACA;AACA;AACA;AACA;;;AACO,eAAeC,OAAf,CAAuBV,GAAvB,EAA4B;EAC/B,IAAI;IACA,MAAM;MAACW;IAAD,IAAOX,GAAG,CAACY,MAAjB;IACA,MAAMC,cAAc,GAAG,IAAAC,sBAAA,EAAWH,EAAX,CAAvB;;IACA,IAAIE,cAAJ,EAAoB;MAChB,OAAOb,GAAG,CAACG,IAAJ,GAAW;QACdC,IAAI,EAAES;MADQ,CAAlB;IAGH;;IAEDb,GAAG,CAACM,MAAJ,GAAa,GAAb;IACA,OAAON,GAAG,CAACG,IAAJ,GAAW;MACdG,MAAM,EAAE,QADM;MAEdG,OAAO,EAAE;IAFK,CAAlB;EAIH,CAdD,CAcE,OAAOJ,CAAP,EAAU;IACR,OAAOL,GAAG,CAACG,IAAJ,GAAW;MACdI,OAAO,EAAE,KADK;MAEdC,KAAK,EAAEH,CAAC,CAACI;IAFK,CAAlB;EAIH;AACJ;AAED;AACA;AACA;AACA;AACA;;;AACO,eAAeM,IAAf,CAAoBf,GAApB,EAAyB;EAC5B,IAAI;IACA,MAAMgB,QAAQ,GAAGhB,GAAG,CAACiB,OAAJ,CAAYd,IAA7B;IACA,IAAAe,oBAAA,EAAQF,QAAR;IAEAhB,GAAG,CAACM,MAAJ,GAAa,GAAb;IACA,OAAON,GAAG,CAACG,IAAJ,GAAW;MACdI,OAAO,EAAE;IADK,CAAlB;EAGH,CARD,CAQE,OAAOF,CAAP,EAAU;IACR,OAAOL,GAAG,CAACG,IAAJ,GAAW;MACdI,OAAO,EAAE,KADK;MAEdC,KAAK,EAAEH,CAAC,CAACI;IAFK,CAAlB;EAIH;AACJ"}